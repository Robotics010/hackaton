<?xml version="1.0" ?>
<sdf version="1.8">
<world name="car_world" xmlns:xacro="http://ros.org/wiki/xacro">
  <physics name="5ms" type="ignored">
    <max_step_size>0.005</max_step_size>
    <real_time_factor>1.0</real_time_factor>
  </physics>
  <plugin
    filename="libignition-gazebo-physics-system.so"
    name="ignition::gazebo::systems::Physics">
  </plugin>
  <plugin
    filename="libignition-gazebo-user-commands-system.so"
    name="ignition::gazebo::systems::UserCommands">
  </plugin>
  <plugin
    filename="libignition-gazebo-scene-broadcaster-system.so"
    name="ignition::gazebo::systems::SceneBroadcaster">
  </plugin>
  <plugin
    filename="libGameManager.so"
    name="ignition::gazebo::systems::GameManager">
  </plugin>

  <light type="directional" name="sun">
    <cast_shadows>true</cast_shadows>
    <pose>0 0 10 0 0 0</pose>
    <diffuse>0.8 0.8 0.8 1</diffuse>
    <specular>0.2 0.2 0.2 1</specular>
    <attenuation>
      <range>1000</range>
      <constant>0.9</constant>
      <linear>0.01</linear>
      <quadratic>0.001</quadratic>
    </attenuation>
    <direction>-0.5 0.1 -0.9</direction>
  </light>

  <model name="ground_plane">
    <static>true</static>
    <link name="link">
      <collision name="collision">
      <geometry>
        <plane>
        <normal>0 0 1</normal>
        </plane>
      </geometry>
      </collision>
      <visual name="visual">
      <geometry>
        <plane>
        <normal>0 0 1</normal>
        <size>100 100</size>
        </plane>
      </geometry>
      <material>
        <ambient>0.9 0.9 0.9 1</ambient>
        <diffuse>0.9 0.9 0.9 1</diffuse>
        <specular>0.9 0.9 0.9 1</specular>
      </material>
      </visual>
    </link>
  </model>

  <xacro:macro name="border" params="id length x y z yaw">
  <model name="border_${id}">
    <pose relative_to='world'>${x} ${y} ${z} 0 0 ${yaw}</pose>
    <static>true</static>
    <link name="body">
    <collision name="collision">
      <geometry>
        <box>
          <size>${length} 0.022 0.07</size>
        </box>
      </geometry>
      </collision>
      <visual name="visual">
      <geometry>
        <box>
          <size>${length} 0.022 0.07</size>
        </box>
      </geometry>
      <material>
        <ambient>0.7098 0.6902 0.6314 1</ambient>
        <diffuse>0.7098 0.6902 0.6314 1</diffuse>
        <specular>0.7098 0.6902 0.6314 1</specular>
      </material>
      </visual>
    </link>
  </model>
  </xacro:macro>

  <xacro:border id="front" length="${3.0+0.022*2}" x="0" y="-1.011" z="0.035" yaw="0"/>
  <xacro:border id="back" length="${3.0+0.022*2}" x="0" y="1.011" z="0.035" yaw="0"/>
  <xacro:border id="left" length="${2.0+0.022*2}" x="1.511" y="0" z="0.035" yaw="${pi/2}"/>
  <xacro:border id="right" length="${2.0+0.022*2}" x="-1.511" y="0" z="0.035" yaw="${pi/2}"/>


  <xacro:property name="column_radius" value="0.0365" />
  <xacro:property name="column_height" value="0.109" />

  <xacro:macro name="cylinder_inertia" params="m r h">
    <inertial>
      <mass>${m}</mass>
      <inertial>
        <ixx>${(m/12) * (3*r*r + h*h)}</ixx>
        <ixy>0</ixy>
        <ixz>0</ixz>
        <iyy>${(m/12) * (3*r*r + h*h)}</iyy>
        <iyz>0</iyz>
        <izz>${(m/2) * (r*r)}</izz>
      </inertial>
    </inertial>
  </xacro:macro>

  <xacro:macro name="column_can" params="id x y z">
  <model name="column_${id}">
    <pose relative_to="world">${x} ${y} ${z} 0 0 0</pose>
    <link name="body">
      <visual name="visual">
        <geometry>
          <cylinder>
            <radius>${column_radius}</radius>
            <length>${column_height}</length>
          </cylinder>
        </geometry>
        <material>
          <ambient>1.0 1.0 1.0 1</ambient>
          <diffuse>1.0 1.0 1.0 1</diffuse>
          <specular>0.1 0.1 0.1 1</specular>
        </material>
      </visual>
      <collision name="collision">
          <surface>
            <friction>
              <ode>
                <mu>0.1</mu>
                <mu2>0.1</mu2>
              </ode>
            </friction>
          </surface>
          <geometry>
          <cylinder>
            <radius>${column_radius}</radius>
            <length>${column_height}</length>
          </cylinder>
          </geometry>
        </collision>
      <xacro:cylinder_inertia m="0.1" r="${column_radius}" h="${column_height}"/>
    </link>
  </model>
  </xacro:macro>

  <xacro:property name="platform_length" value="0.4" />
  <xacro:property name="platform_width" value="0.1" />
  <xacro:property name="platform_thick" value="0.015" />

  <xacro:macro name="box_inertia" params="m l w t">
    <inertial>
      <mass>${m}</mass>
      <inertial>
        <ixx>${(m/12) * (w*w + t*t)}</ixx>
        <ixy>0</ixy>
        <ixz>0</ixz>
        <iyy>${(m/12) * (l*l + t*t)}</iyy>
        <iyz>0</iyz>
        <izz>${(m/12) * (l*l + w*w)}</izz>
      </inertial>
    </inertial>
  </xacro:macro>

  <xacro:macro name="platform_plank" params="id x y z yaw">
  <model name="platform_${id}">
    <pose relative_to="world">${x} ${y} ${z} 0 0 ${yaw}</pose>
    <link name="body">
      <visual name='visual'>
        <geometry>
          <box>
              <size>${platform_length} ${platform_width} ${platform_thick}</size>
          </box>
        </geometry>
        <material>
          <ambient>0.647 0.165 0.165 1</ambient>
          <diffuse>0.647 0.165 0.165 1</diffuse>
          <specular>0.647 0.165 0.165 1</specular>
        </material>
      </visual>
      <collision name='collision'>
          <surface>
            <friction>
              <ode>
                <mu>0.1</mu>
                <mu2>0.1</mu2>
              </ode>
            </friction>
          </surface>
          <geometry>
              <box>
                  <size>${platform_length} ${platform_width} ${platform_thick}</size>
              </box>
          </geometry>
      </collision>
      <xacro:box_inertia m="0.5" l="${platform_length}" w="${platform_width}" t="${platform_thick}" />
    </link>
  </model>
  </xacro:macro>

  <xacro:column_can id="1" x="-0.525" y="0.725" z="${column_height/2}"/>
  <xacro:column_can id="2" x="-0.625" y="0.725" z="${column_height/2}"/>
  <xacro:column_can id="3" x="-0.725" y="0.725" z="${column_height/2}"/>
  <xacro:column_can id="4" x="-0.825" y="0.725" z="${column_height/2}"/>
  <xacro:platform_plank id="1" x="-0.674" y="0.725" z="${column_height+platform_thick/2}" yaw="0"/>
  <xacro:platform_plank id="2" x="-0.676" y="0.725" z="${column_height+platform_thick/2+platform_thick}" yaw="0"/>

  <xacro:column_can id="5" x="0.525" y="0.725" z="${column_height/2}"/>
  <xacro:column_can id="6" x="0.625" y="0.725" z="${column_height/2}"/>
  <xacro:column_can id="7" x="0.725" y="0.725" z="${column_height/2}"/>
  <xacro:column_can id="8" x="0.825" y="0.725" z="${column_height/2}"/>
  <xacro:platform_plank id="3" x="0.674" y="0.725" z="${column_height+platform_thick/2}" yaw="0"/>
  <xacro:platform_plank id="4" x="0.676" y="0.725" z="${column_height+platform_thick/2+platform_thick}" yaw="0"/>

  <xacro:column_can id="9" x="-1.425" y="0.175" z="${column_height/2}"/>
  <xacro:column_can id="10" x="-1.425" y="0.275" z="${column_height/2}"/>
  <xacro:column_can id="11" x="-1.425" y="0.375" z="${column_height/2}"/>
  <xacro:column_can id="12" x="-1.425" y="0.475" z="${column_height/2}"/>
  <xacro:platform_plank id="5" x="-1.425" y="0.324" z="${column_height+platform_thick/2}" yaw="${pi/2}"/>
  <xacro:platform_plank id="6" x="-1.425" y="0.326" z="${column_height+platform_thick/2+platform_thick}" yaw="${pi/2}"/>

  <xacro:column_can id="13" x="1.425" y="0.175" z="${column_height/2}"/>
  <xacro:column_can id="14" x="1.425" y="0.275" z="${column_height/2}"/>
  <xacro:column_can id="15" x="1.425" y="0.375" z="${column_height/2}"/>
  <xacro:column_can id="16" x="1.425" y="0.475" z="${column_height/2}"/>
  <xacro:platform_plank id="7" x="1.425" y="0.324" z="${column_height+platform_thick/2}" yaw="${pi/2}"/>
  <xacro:platform_plank id="8" x="1.425" y="0.326" z="${column_height+platform_thick/2+platform_thick}" yaw="${pi/2}"/>

  <xacro:column_can id="17" x="-1.425" y="-0.450" z="${column_height/2}"/>
  <xacro:column_can id="18" x="-1.425" y="-0.550" z="${column_height/2}"/>
  <xacro:column_can id="19" x="-1.425" y="-0.650" z="${column_height/2}"/>
  <xacro:column_can id="20" x="-1.425" y="-0.750" z="${column_height/2}"/>
  <xacro:platform_plank id="9" x="-1.425" y="-0.599" z="${column_height+platform_thick/2}" yaw="${pi/2}"/>
  <xacro:platform_plank id="10" x="-1.425" y="-0.601" z="${column_height+platform_thick/2+platform_thick}" yaw="${pi/2}"/>

  <xacro:column_can id="21" x="1.425" y="-0.450" z="${column_height/2}"/>
  <xacro:column_can id="22" x="1.425" y="-0.550" z="${column_height/2}"/>
  <xacro:column_can id="23" x="1.425" y="-0.650" z="${column_height/2}"/>
  <xacro:column_can id="24" x="1.425" y="-0.750" z="${column_height/2}"/>
  <xacro:platform_plank id="11" x="1.425" y="-0.599" z="${column_height+platform_thick/2}" yaw="${pi/2}"/>
  <xacro:platform_plank id="12" x="1.425" y="-0.601" z="${column_height+platform_thick/2+platform_thick}" yaw="${pi/2}"/>

  <xacro:column_can id="25" x="-0.575" y="-0.750" z="${column_height/2}"/>
  <xacro:column_can id="26" x="-0.675" y="-0.750" z="${column_height/2}"/>
  <xacro:column_can id="27" x="-0.775" y="-0.750" z="${column_height/2}"/>
  <xacro:column_can id="28" x="-0.875" y="-0.750" z="${column_height/2}"/>
  <xacro:platform_plank id="13" x="-0.724" y="-0.750" z="${column_height+platform_thick/2}" yaw="0"/>
  <xacro:platform_plank id="14" x="-0.726" y="-0.750" z="${column_height+platform_thick/2+platform_thick}" yaw="0"/>

  <xacro:column_can id="29" x="0.575" y="-0.750" z="${column_height/2}"/>
  <xacro:column_can id="30" x="0.675" y="-0.750" z="${column_height/2}"/>
  <xacro:column_can id="31" x="0.775" y="-0.750" z="${column_height/2}"/>
  <xacro:column_can id="32" x="0.875" y="-0.750" z="${column_height/2}"/>
  <xacro:platform_plank id="15" x="0.724" y="-0.750" z="${column_height+platform_thick/2}" yaw="0"/>
  <xacro:platform_plank id="16" x="0.726" y="-0.750" z="${column_height+platform_thick/2+platform_thick}" yaw="0"/>

  <xacro:column_can id="33" x="-0.25" y="-0.05" z="${column_height/2}"/>
  <xacro:column_can id="34" x="-0.35" y="-0.05" z="${column_height/2}"/>
  <xacro:column_can id="35" x="-0.45" y="-0.05" z="${column_height/2}"/>
  <xacro:column_can id="36" x="-0.55" y="-0.05" z="${column_height/2}"/>
  <xacro:platform_plank id="17" x="-0.399" y="-0.05" z="${column_height+platform_thick/2}" yaw="0"/>
  <xacro:platform_plank id="18" x="-0.401" y="-0.05" z="${column_height+platform_thick/2+platform_thick}" yaw="0"/>

  <xacro:column_can id="37" x="0.25" y="-0.05" z="${column_height/2}"/>
  <xacro:column_can id="38" x="0.35" y="-0.05" z="${column_height/2}"/>
  <xacro:column_can id="39" x="0.45" y="-0.05" z="${column_height/2}"/>
  <xacro:column_can id="40" x="0.55" y="-0.05" z="${column_height/2}"/>
  <xacro:platform_plank id="19" x="0.399" y="-0.05" z="${column_height+platform_thick/2}" yaw="0"/>
  <xacro:platform_plank id="20" x="0.401" y="-0.05" z="${column_height+platform_thick/2+platform_thick}" yaw="0"/>

  <xacro:macro name="blue_material">
    <material>
        <ambient>0 0.3569 0.549 0.9</ambient>
        <diffuse>0 0.3569 0.549 0.9</diffuse>
        <specular>0 0.3569 0.549 0.9</specular>
    </material>
  </xacro:macro>
  <xacro:macro name="yellow_material">
    <material>
        <ambient>0.9686 0.7098 0.0 0.9</ambient>
        <diffuse>0.9686 0.7098 0.0 0.9</diffuse>
        <specular>0.9686 0.7098 0.0 0.9</specular>
    </material>
  </xacro:macro>

  <xacro:macro name="start_zone_blue" params="id x y">
  <model name="start_zone_${id}">
    <pose relative_to='world'>${x} ${y} 0.0005 0 0 0</pose>
    <static>true</static>
    <link name="body">
      <visual name="visual">
      <geometry>
        <box>
          <size>0.45 0.45 0.001</size>
        </box>
      </geometry>
      <xacro:blue_material />
      </visual>
    </link>
  </model>
  </xacro:macro>

  <xacro:macro name="start_zone_yellow" params="id x y">
  <model name="start_zone_${id}">
    <pose relative_to='world'>${x} ${y} 0.0005 0 0 0</pose>
    <static>true</static>
    <link name="body">
      <visual name="visual">
      <geometry>
        <box>
          <size>0.45 0.45 0.001</size>
        </box>
      </geometry>
      <xacro:yellow_material />
      </visual>
    </link>
  </model>
  </xacro:macro>

  <xacro:macro name="finish_zone_blue" params="id x y">
  <model name="finish_zone_${id}">
    <pose relative_to='world'>${x} ${y} 0.0005 0 0 0</pose>
    <static>true</static>
    <link name="body">
      <visual name="visual">
      <geometry>
        <box>
          <size>0.45 0.45 0.001</size>
        </box>
      </geometry>
      <xacro:blue_material />
      </visual>
    </link>
  </model>
  </xacro:macro>

  <xacro:macro name="finish_zone_yellow" params="id x y">
  <model name="finish_zone_${id}">
    <pose relative_to='world'>${x} ${y} 0.0005 0 0 0</pose>
    <static>true</static>
    <link name="body">
      <visual name="visual">
      <geometry>
        <box>
          <size>0.45 0.45 0.001</size>
        </box>
      </geometry>
      <xacro:yellow_material />
      </visual>
    </link>
  </model>
  </xacro:macro>

  <xacro:macro name="construction_zone_blue" params="id x y">
  <model name="construction_zone_${id}">
    <pose relative_to='world'>${x} ${y} 0.0005 0 0 0</pose>
    <static>true</static>
    <link name="body">
      <visual name="visual">
      <geometry>
        <box>
          <size>0.45 0.15 0.001</size>
        </box>
      </geometry>
      <xacro:blue_material />
      </visual>
    </link>
  </model>
  </xacro:macro>

  <xacro:macro name="construction_zone_yellow" params="id x y">
  <model name="construction_zone_${id}">
    <pose relative_to='world'>${x} ${y} 0.0005 0 0 0</pose>
    <static>true</static>
    <link name="body">
      <visual name="visual">
      <geometry>
        <box>
          <size>0.45 0.15 0.001</size>
        </box>
      </geometry>
      <xacro:yellow_material />
      </visual>
    </link>
  </model>
  </xacro:macro>

  <xacro:macro name="reserved_zone_blue" params="id x y">
  <model name="reserved_zone_${id}">
    <pose relative_to='world'>${x} ${y} 0.0005 0 0 0</pose>
    <static>true</static>
    <link name="body">
      <visual name="visual">
      <geometry>
        <box>
          <size>0.45 0.25 0.001</size>
        </box>
      </geometry>
      <xacro:blue_material />
      </visual>
    </link>
  </model>
  </xacro:macro>

  <xacro:macro name="reserved_zone_yellow" params="id x y">
  <model name="reserved_zone_${id}">
    <pose relative_to='world'>${x} ${y} 0.0005 0 0 0</pose>
    <static>true</static>
    <link name="body">
      <visual name="visual">
      <geometry>
        <box>
          <size>0.45 0.25 0.001</size>
        </box>
      </geometry>
      <xacro:yellow_material />
      </visual>
    </link>
  </model>
  </xacro:macro>

  <xacro:start_zone_blue id="1" x="0.275" y="-0.775" />
  <xacro:start_zone_yellow id="2" x="-0.275" y="-0.775" />
  <xacro:start_zone_blue id="3" x="-1.275" y="-0.125" />
  <xacro:start_zone_yellow id="4" x="1.275" y="-0.125" />
  <xacro:finish_zone_blue id="5" x="1.125" y="0.775" />
  <xacro:finish_zone_yellow id="6" x="-1.125" y="0.775" />
  <xacro:construction_zone_blue id="7" x="0.725" y="-0.925" />
  <xacro:construction_zone_yellow id="8" x="-0.725" y="-0.925" />
  <xacro:construction_zone_blue id="9" x="-1.275" y="-0.925" />
  <xacro:construction_zone_yellow id="10" x="1.275" y="-0.925" />
  <xacro:reserved_zone_blue id="11" x="0.675" y="0.675" />
  <xacro:reserved_zone_yellow id="12" x="-0.675" y="0.675" />

</world>
</sdf>